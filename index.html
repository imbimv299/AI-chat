<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>Auiチャット</title>
  <style>
    body { font-family: sans-serif; background: #f0f0f0; padding: 20px; }
    #chatbox { width: 100%; height: 150px; margin-bottom: 10px; }
    #response { white-space: pre-wrap; background: white; padding: 10px; border-radius: 5px; }
  </style>
</head>
<body>
  <h1>🌟 Auiチャット（OpenRouter連携）</h1>
  <textarea id="chatbox" placeholder="メッセージを入力してください..."></textarea><br>
  <button onclick="sendMessage()">送信</button>
  <h3>返答:</h3>
  <div id="response">...</div>

  <script>
    async function sendMessage() {
      const userInput = document.getElementById("chatbox").value;
      const responseBox = document.getElementById("response");

      responseBox.textContent = "読み込み中...";

      const res = await fetch("https://openrouter.ai/api/v1/chat/completions", {
        method: "POST",
        headers: {
          "Authorization": "Bearer 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",
          "Content-Type": "application/json"
        },
        body: JSON.stringify({
          model: "mistral/mistral-7b-instruct",
          messages: [{ role: "user", content: userInput }]
        })
      });

      const data = await res.json();

      if (data.choices && data.choices.length > 0) {
        responseBox.textContent = data.choices[0].message.content;
      } else {
        responseBox.textContent = "エラーが発生しました: " + JSON.stringify(data);
      }
    }
  </script>
</body>
</html>
