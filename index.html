<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>Ai-g!chat</title>
  <style>
    body { background: #111; color: #eee; font-family: sans-serif; padding: 20px; }
    #chat { max-height: 400px; overflow-y: auto; margin-bottom: 10px; }
    .msg { margin-bottom: 10px; }
    .user { color: #81d4fa; }
    .ai { color: #c5e1a5; }
    input, button {
      font-size: 16px; padding: 10px; width: 100%;
      margin-top: 10px; box-sizing: border-box;
    }
  </style>
</head>
<body>
  <h2>üß† Ai-g!chat (OpenRouter)</h2>
  <div id="chat"></div>
  <input id="input" placeholder="„É°„ÉÉ„Çª„Éº„Ç∏„ÇíÂÖ•Âäõ..." />
  <button onclick="send()">ÈÄÅ‰ø°</button>

  <script>
    const API_KEY = "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"; // ‚Üê Êñ∞„Åó„ÅÑAPI„Ç≠„Éº„Å´Â∑Æ„ÅóÊõø„Åà„Å¶ÔºÅ
    const MODEL = "google/gemini-2.5-pro-exp-03-25"; // ‰ªñ„Å´„ÇÇÂ§âÊõ¥ÂèØÔºömistralai/mistral-7b„Å™„Å©
    const ENDPOINT = "https://openrouter.ai/api/v1/chat/completions";
    const chat = document.getElementById("chat");
    const input = document.getElementById("input");

    async function send() {
      const text = input.value.trim();
      if (!text) return;
      append("üë§", text, "user");
      input.value = "";
      input.disabled = true;

      const res = await fetch(ENDPOINT, {
        method: "POST",
        headers: {
          "Authorization": "Bearer " + API_KEY,
          "Content-Type": "application/json"
        },
        body: JSON.stringify({
          model: MODEL,
          messages: [{ role: "user", content: text }]
        })
      });

      const data = await res.json();
      const reply = data.choices?.[0]?.message?.content || "‚ùå „Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Åæ„Åó„Åü";
      append("ü§ñ", reply, "ai");
      input.disabled = false;
      input.focus();
      chat.scrollTop = chat.scrollHeight;
    }

    function append(sender, text, cls) {
      const div = document.createElement("div");
      div.className = `msg ${cls}`;
      div.textContent = `${sender}: ${text}`;
      chat.appendChild(div);
    }

    input.addEventListener("keydown", e => {
      if (e.key === "Enter") send();
    });
  </script>
</body>
</html>
